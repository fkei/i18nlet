var i18nlet=function(){"use strict";var e="0.0.3";var t=false;var n="en";var a=":";var r="{{";var i="}}";var s=null;var o="";var g="i";var l=true;var h=function(e){var t=[],n=arguments.length-1;while(n-- >0)t[n]=arguments[n+1];t.unshift("["+e.toUpperCase()+"]");t.unshift("[i18nlet]");try{console.log.apply(console,t)}catch(e){console.log(t)}};var u=function(e,t){var n=this;Object.keys(t).forEach(function(a){n.k2v[""+e+n.settings.langageSeparator+a]=t[a]})};var f=function(e){var t=this;Object.keys(e).forEach(function(n){t.load(n,e[n])})};var c=function c(p){var v=this;if(p===void 0)p={};this.version=e||"";this.k2v={};this.settings={};this.settings.currentLangage=this.settings.defaultLangage=p.defaultLangage||n;this.settings.langageSeparator=p.langageSeparator||a;this.settings.debug=p.debug||t;this.settings.variableKeyPrefix=p.variableKeyPrefix||r;this.settings.variableKeySuffix=p.variableKeySuffix||i;this.settings.noConvertVariable=p.noConvertVariable||s;this.settings.reference=l;if(typeof p.reference==="boolean"){this.settings.reference=p.reference}this.settings.defaultText=o;if(typeof p.defaultText==="string"){this.settings.defaultText=p.defaultText}this.settings.getMessageFunctionName=p.getMessageFunctionName||g;this[this.settings.getMessageFunctionName]=this._i18nlet_get_message;this.regexpStr=this.settings.variableKeyPrefix+"(.+?)"+this.settings.variableKeySuffix;this.regexp=new RegExp(this.regexpStr,"g");this.logger={};this.logger.output=p.output||h;this.logger.debug=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];if(!v.settings.debug){return}e.unshift("DEBUG");v.logger.output.apply(null,e)};this.logger.error=function(e){var t=new Error("[i18nlet] "+e);v.logger.output.apply(null,["ERROR",t])};this.hook={load:u,loads:f};if(p.hook&&p.hook.load){this.logger.debug("hook load()");this.hook.load=p.hook.load}if(p.hook&&p.hook.loads){this.logger.debug("hook loads()");this.hook.loads=p.hook.loads}};c.prototype.load=function e(){this.hook.load.apply(this,arguments);return this};c.prototype.loads=function e(){this.hook.loads.apply(this,arguments);return this};c.prototype.changeLangage=function e(t){this.settings.currentLangage=t||this.settings.defaultLangage};c.prototype.currentLangage=function e(){return this.settings.currentLangage};c.prototype._getDefaultText=function e(t,n,a){if(typeof n!=="undefined"){return n}this.logger.debug("context not found. context:'"+t+"'");if(typeof a==="string"){return a}return this.settings.defaultText};c.prototype._i18nlet_get_message=function e(t,n,a){var r=this;n=n||{};a=a||{};if(typeof a.ref==="boolean"){a.ref=!!a.ref}else{a.ref=this.settings.reference}a.langage=a.langage?a.langage:this.currentLangage();var i=""+a.langage+this.settings.langageSeparator+t;var s=this.k2v[i];if(!s){this.logger.debug("Context not found. '"+t+"' for '"+i+"'")}var o=s;var g;while(g=this.regexp.exec(o)){var l=n[g[1].trim()];if(!l){r.logger.debug("It can not convert the variable part. '"+g[0]+"' for '"+o+"'");o=typeof r.settings.noConvertVariable==="string"?o.replace(g[0],r.settings.noConvertVariable):o;continue}o=o.replace(g[0],l);r.regexp.lastIndex=0}if(!a.ref){return this._getDefaultText(t,o,a.defaultText)}var h;while(h=this.regexp.exec(o)){var u=""+(a.langage||r.currentLangage())+r.settings.langageSeparator+h[1].trim();var f=r.k2v[u];if(!f){r.logger.debug("It can not convert the constant part. '"+h[0]+"' for '"+o+"'");o=typeof r.settings.noConvertVariable==="string"?o.replace(h[0],r.settings.noConvertVariable):o;continue}o=o.replace(h[0],f);r.regexp.lastIndex=0}return this._getDefaultText(t,o,a.defaultText)};return c}();