var i18nlet=function(){"use strict";var e="0.0.2";var t=false;var a="en";var r=":";var i="{{";var n="}}";var o=null;var s="i";var g=function(e){var t=[],a=arguments.length-1;while(a-- >0)t[a]=arguments[a+1];t.unshift("["+e.toUpperCase()+"]");t.unshift("[i18nlet]");try{console.log.apply(console,t)}catch(e){console.log(t)}};var l=function(e,t){var a=this;Object.keys(t).forEach(function(r){a.k2v[""+e+a.settings.langageSeparator+r]=t[r]})};var h=function(e){var t=this;Object.keys(e).forEach(function(a){t.load(a,e[a])})};var u=function u(f){var v=this;if(f===void 0)f={};this.version=e||"";this.k2v={};this.settings={};this.settings.currentLangage=this.settings.defaultLangage=f.defaultLangage||a;this.settings.langageSeparator=f.langageSeparator||r;this.settings.debug=f.debug||t;this.settings.variableKeyPrefix=f.variableKeyPrefix||i;this.settings.variableKeySuffix=f.variableKeySuffix||n;this.settings.defaultNoConvertVariable=f.defaultNoConvertVariable||o;var p=f.getMessageFunctionName||s;this[p]=this._i18nlet_get_message;this.regexpStr=this.settings.variableKeyPrefix+"(.+?)"+this.settings.variableKeySuffix;this.regexp=new RegExp(this.regexpStr,"g");this.logger={};this.logger.output=f.output||g;this.logger.debug=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];if(!v.settings.debug){return}e.unshift("DEBUG");v.logger.output.apply(null,e)};this.logger.error=function(e){var t=new Error("[i18nlet] "+e);v.logger.output.apply(null,["ERROR",t])};this.hook={load:l,loads:h};if(f.hook&&f.hook.load){this.logger.debug("hook load()");this.hook.load=f.hook.load}if(f.hook&&f.hook.loads){this.logger.debug("hook loads()");this.hook.loads=f.hook.loads}};u.prototype.load=function e(){this.hook.load.apply(this,arguments);return this};u.prototype.loads=function e(){this.hook.loads.apply(this,arguments);return this};u.prototype.changeLangage=function e(t){this.settings.currentLangage=t||this.settings.defaultLangage};u.prototype.currentLangage=function e(){return this.settings.currentLangage};u.prototype._i18nlet_get_message=function e(t,a,r){var i=this;a=a||{};r=r||{};r.ref=!!r.ref;r.langage=r.langage?r.langage:this.currentLangage();var n=""+r.langage+this.settings.langageSeparator+t;var o=this.k2v[n];if(!o){this.logger.debug("Context not found. '"+t+"' for '"+n+"'")}var s=o;var g;while(g=this.regexp.exec(s)){var l=a[g[1].trim()];if(!l){i.logger.debug("It can not convert the variable part. '"+g[0]+"' for '"+s+"'");s=typeof i.settings.defaultNoConvertVariable==="string"?s.replace(g[0],i.settings.defaultNoConvertVariable):s;continue}s=s.replace(g[0],l);i.regexp.lastIndex=0}if(!r.ref){return s}var h;while(h=this.regexp.exec(s)){var u=""+(r.langage||i.currentLangage())+i.settings.langageSeparator+h[1].trim();var f=i.k2v[u];if(!f){i.logger.debug("It can not convert the constant part. '"+h[0]+"' for '"+s+"'");s=typeof i.settings.defaultNoConvertVariable==="string"?s.replace(h[0],i.settings.defaultNoConvertVariable):s;continue}s=s.replace(h[0],f);i.regexp.lastIndex=0}return s};return u}();