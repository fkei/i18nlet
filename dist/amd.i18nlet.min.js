define(function(){"use strict";var t="0.0.1";var e=false;var a="en";var r=":";var o="{{";var n="}}";var i=null;var s=function(t){var e=[],a=arguments.length-1;while(a-- >0)e[a]=arguments[a+1];e.unshift("["+t.toUpperCase()+"]");e.unshift("[i18nlet]");try{console.log.apply(console,e)}catch(t){console.log(e)}};var g=function(t,e){var a=this;Object.keys(e).forEach(function(r){a.k2v[""+t+a.settings.langageSeparator+r]=e[r]})};var l=function(t){var e=this;Object.keys(t).forEach(function(a){e.load(a,t[a])})};var h=function h(u){var f=this;if(u===void 0)u={};this.version=t||"";this.k2v={};this.settings={};this.settings.currentLangage=this.settings.defaultLangage=u.defaultLangage||a;this.settings.langageSeparator=u.langageSeparator||r;this.settings.debug=u.debug||e;this.settings.variableKeyPrefix=u.variableKeyPrefix||o;this.settings.variableKeySuffix=u.variableKeySuffix||n;this.settings.defaultNoConvertVariable=u.defaultNoConvertVariable||i;this.regexpStr=this.settings.variableKeyPrefix+"(.+?)"+this.settings.variableKeySuffix;this.regexp=new RegExp(this.regexpStr,"g");this.logger={};this.logger.output=u.output||s;this.logger.debug=function(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];if(!f.settings.debug){return}t.unshift("DEBUG");f.logger.output.apply(null,t)};this.logger.error=function(t){var e=new Error("[i18nlet] "+t);f.logger.output.apply(null,["ERROR",e])};this.hook={load:g,loads:l};if(u.hook&&u.hook.load){this.logger.debug("hook load()");this.hook.load=u.hook.load}if(u.hook&&u.hook.loads){this.logger.debug("hook loads()");this.hook.loads=u.hook.loads}};h.prototype.load=function t(){this.hook.load.apply(this,arguments);return this};h.prototype.loads=function t(){this.hook.loads.apply(this,arguments);return this};h.prototype.changeLangage=function t(e){this.settings.currentLangage=e||this.settings.defaultLangage};h.prototype.currentLangage=function t(){return this.settings.currentLangage};h.prototype.i=function t(e,a,r){var o=this;a=a||{};r=r||{};r.ref=!!r.ref;r.langage=r.langage?r.langage:this.currentLangage();var n=""+r.langage+this.settings.langageSeparator+e;var i=this.k2v[n];if(!i){this.logger.debug("Context not found. '"+e+"' for '"+n+"'")}var s=i;var g;while(g=this.regexp.exec(s)){var l=a[g[1].trim()];if(!l){o.logger.debug("It can not convert the variable part. '"+g[0]+"' for '"+s+"'");s=typeof o.settings.defaultNoConvertVariable==="string"?s.replace(g[0],o.settings.defaultNoConvertVariable):s;continue}s=s.replace(g[0],l);o.regexp.lastIndex=0}if(!r.ref){return s}var h;while(h=this.regexp.exec(s)){var u=""+(r.langage||o.currentLangage())+o.settings.langageSeparator+h[1].trim();var f=o.k2v[u];if(!f){o.logger.debug("It can not convert the constant part. '"+h[0]+"' for '"+s+"'");s=typeof o.settings.defaultNoConvertVariable==="string"?s.replace(h[0],o.settings.defaultNoConvertVariable):s;continue}s=s.replace(h[0],f);o.regexp.lastIndex=0}return s};return h});